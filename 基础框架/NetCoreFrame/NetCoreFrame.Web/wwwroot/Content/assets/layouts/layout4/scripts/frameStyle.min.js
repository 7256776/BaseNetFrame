var frameStyle = function () { var handleTheme = function () { var panel = $('.theme-panel'); if ($('body').hasClass('page-boxed') === false) { $('.layout-option', panel).val("fluid") } $('.sidebar-option', panel).val("default"); $('.page-header-option', panel).val("fixed"); $('.page-footer-option', panel).val("default"); if ($('.sidebar-pos-option').attr("disabled") === false) { $('.sidebar-pos-option', panel).val(App.isRTL() ? 'right' : 'left') } var resetLayout = function () { $("body").removeClass("page-boxed").removeClass("page-footer-fixed").removeClass("page-sidebar-fixed").removeClass("page-header-fixed").removeClass("page-sidebar-reversed"); $('.page-header > .page-header-inner').removeClass("container"); if ($('.page-container').parent(".container").size() === 1) { $('.page-container').insertAfter('.layoutBody > .clearfix') } if ($('.page-footer > .container').size() === 1) { $('.page-footer').html($('.page-footer > .container').html()) } else if ($('.page-footer').parent(".container").size() === 1) { $('.page-footer').insertAfter('.page-container'); $('.scroll-to-top').insertAfter('.page-footer') } $(".top-menu > .navbar-nav > li.dropdown").removeClass("dropdown-dark"); $('.layoutBody > .container').remove() }; var lastSelectedLayout = ''; var setLayout = function () { var layoutOption = $('.layout-option', panel).val(); var sidebarOption = $('.sidebar-option', panel).val(); var headerOption = $('.page-header-option', panel).val(); var footerOption = $('.page-footer-option', panel).val(); var sidebarPosOption = $('.sidebar-pos-option', panel).val(); var sidebarStyleOption = $('.sidebar-style-option', panel).val(); var sidebarMenuOption = $('.sidebar-menu-option', panel).val(); var headerTopDropdownStyle = $('.page-header-top-dropdown-style-option', panel).val(); if (sidebarOption == "fixed" && headerOption == "default") { alert('菜单栏为固定状态时,顶部页面必须同时设置为固定状态!'); $('.page-header-option', panel).val("fixed"); $('.sidebar-option', panel).val("fixed"); sidebarOption = 'fixed'; headerOption = 'fixed' } resetLayout(); if (layoutOption === "boxed") { $("body").addClass("page-boxed"); $('.page-header > .page-header-inner').addClass("container"); var cont = $('.layoutBody > .clearfix').after('<div class="container"></div>'); $('.page-container').appendTo('.layoutBody > .container'); if (footerOption === 'fixed') { $('.page-footer').html('<div class="container">' + $('.page-footer').html() + '</div>') } else { $('.page-footer').appendTo('.layoutBody > .container') } } if (lastSelectedLayout != layoutOption) { App.runResizeHandlers() } lastSelectedLayout = layoutOption; if (headerOption === 'fixed') { $("body").addClass("page-header-fixed"); $(".page-header").removeClass("navbar-static-top").addClass("navbar-fixed-top") } else { $("body").removeClass("page-header-fixed"); $(".page-header").removeClass("navbar-fixed-top").addClass("navbar-static-top") } if ($('body').hasClass('page-full-width') === false) { if (sidebarOption === 'fixed') { $("body").addClass("page-sidebar-fixed"); $("page-sidebar-menu").addClass("page-sidebar-menu-fixed"); $("page-sidebar-menu").removeClass("page-sidebar-menu-default"); Layout.initFixedSidebarHoverEffect() } else { $("body").removeClass("page-sidebar-fixed"); $("page-sidebar-menu").addClass("page-sidebar-menu-default"); $("page-sidebar-menu").removeClass("page-sidebar-menu-fixed"); $('.page-sidebar-menu').unbind('mouseenter').unbind('mouseleave') } } if (headerTopDropdownStyle === 'dark') { $(".top-menu > .navbar-nav > li.dropdown").addClass("dropdown-dark") } else { $(".top-menu > .navbar-nav > li.dropdown").removeClass("dropdown-dark") } if (footerOption === 'fixed') { $("body").addClass("page-footer-fixed") } else { $("body").removeClass("page-footer-fixed") } if (sidebarStyleOption === 'compact') { $(".page-sidebar-menu").addClass("page-sidebar-menu-compact") } else { $(".page-sidebar-menu").removeClass("page-sidebar-menu-compact") } if (sidebarMenuOption === 'hover') { if (sidebarOption == 'fixed') { $('.sidebar-menu-option', panel).val("accordion"); alert("悬停菜单栏与固定菜单栏模式不兼容。选择默认的菜单栏模式") } else { $(".page-sidebar-menu").addClass("page-sidebar-menu-hover-submenu") } } else { $(".page-sidebar-menu").removeClass("page-sidebar-menu-hover-submenu") } if (App.isRTL()) { if (sidebarPosOption === 'left') { $("body").addClass("page-sidebar-reversed"); $('#frontend-link').tooltip('destroy').tooltip({ placement: 'right' }) } else { $("body").removeClass("page-sidebar-reversed"); $('#frontend-link').tooltip('destroy').tooltip({ placement: 'left' }) } } else { if (sidebarPosOption === 'right') { $("body").addClass("page-sidebar-reversed"); $('#frontend-link').tooltip('destroy').tooltip({ placement: 'left' }) } else { $("body").removeClass("page-sidebar-reversed"); $('#frontend-link').tooltip('destroy').tooltip({ placement: 'right' }) } } Layout.fixContentHeight(); Layout.initFixedSidebar(); setCookiesFrame() }; var setCookiesFrame = function () { var frameSideLayout = {}; frameSideLayout.layoutOption = $('.layout-option', panel).val(); frameSideLayout.sidebarOption = $('.sidebar-option', panel).val(); frameSideLayout.headerOption = $('.page-header-option', panel).val(); frameSideLayout.footerOption = $('.page-footer-option', panel).val(); frameSideLayout.sidebarPosOption = $('.sidebar-pos-option', panel).val(); frameSideLayout.sidebarMenuOption = $('.sidebar-menu-option', panel).val(); frameSideLayout.headerTopDropdownStyle = $('.page-header-top-dropdown-style-option', panel).val(); frameSideLayout.layoutStyleOption = $('.layout-style-option', panel).val(); frameSideLayout.frameColor = $('#hdFrameColor').val(); Cookies.set('FrameSideLayout', frameSideLayout, { expires: 365 }) }var setColor = function (color) { var color_ = (App.isRTL() ? color + '-rtl' : color); $('#style_color').attr("href", Layout.getLayoutCssPath() + 'themes/' + color_ + ".min.css"); $('#hdFrameColor').val(color); if (color == "drak") { $(".frame-logo-page").removeClass("frame-logo-light").addClass("frame-logo-drak"); $(".frame-logo-title").removeClass("frame-logo-title-drak").addClass("frame-logo-title-light") } else { $(".frame-logo-page").removeClass("frame-logo-drak").addClass("frame-logo-light"); $(".frame-logo-title").removeClass("frame-logo-title-light").addClass("frame-logo-title-drak") } var lis = $(".theme-color"); $.each($('.theme-color'), function (i, o) { $(this).removeClass('active'); var c = $(this).attr("data-theme"); if (c == color) { $(this).addClass("active") } }); setCookiesFrame() }; $('.theme-colors > li', panel).click(function () { var color = $(this).attr("data-theme"); setColor(color); $('ul > li', panel).removeClass("active"); $(this).addClass("active"); if (color === 'dark') { $('.page-actions .btn').removeClass('red-haze').addClass('btn-default btn-transparent') } else { $('.page-actions .btn').removeClass('btn-default btn-transparent').addClass('red-haze') } }); var setThemeStyle = function (style) { var file = (style === 'rounded' ? 'components-rounded' : 'components'); file = (App.isRTL() ? file + '-rtl' : file); $('#style_components').attr("href", App.getGlobalCssPath() + file + ".min.css"); $('.layout-style-option', panel).val(style); setCookiesFrame() }; $('.theme-panel .layout-style-option').change(function () { setThemeStyle($(this).val()) }); if ($("body").hasClass("page-boxed")) { $('.layout-option', panel).val("boxed") } if ($("body").hasClass("page-sidebar-fixed")) { $('.sidebar-option', panel).val("fixed") } if ($("body").hasClass("page-header-fixed")) { $('.page-header-option', panel).val("fixed") } if ($("body").hasClass("page-footer-fixed")) { $('.page-footer-option', panel).val("default") } if ($("body").hasClass("page-sidebar-reversed")) { $('.sidebar-pos-option', panel).val("right") } if ($(".page-sidebar-menu").hasClass("page-sidebar-menu-light")) { $('.sidebar-style-option', panel).val("light") } if ($(".page-sidebar-menu").hasClass("page-sidebar-menu-hover-submenu")) { $('.sidebar-menu-option', panel).val("hover") } var sidebarOption = $('.sidebar-option', panel).val(); var headerOption = $('.page-header-option', panel).val(); var footerOption = $('.page-footer-option', panel).val(); var sidebarPosOption = $('.sidebar-pos-option', panel).val(); var sidebarStyleOption = $('.sidebar-style-option', panel).val(); var sidebarMenuOption = $('.sidebar-menu-option', panel).val(); $('.layout-option, .page-header-top-dropdown-style-option, .page-header-option, .sidebar-option, .page-footer-option, .sidebar-pos-option, .sidebar-style-option, .sidebar-menu-option', panel).change(setLayout); (function () { var frameSideLayout = Cookies.getJSON('FrameSideLayout') || {}; if (frameSideLayout.layoutOption) { $('.layout-option', panel).val(frameSideLayout.layoutOption) } if (frameSideLayout.sidebarOption) { $('.sidebar-option', panel).val(frameSideLayout.sidebarOption) } if (frameSideLayout.headerOption) { $('.page-header-option', panel).val(frameSideLayout.headerOption) } if (frameSideLayout.footerOption) { $('.page-footer-option', panel).val(frameSideLayout.footerOption) } if (frameSideLayout.sidebarPosOption) { $('.sidebar-pos-option', panel).val(frameSideLayout.sidebarPosOption) } if (frameSideLayout.sidebarMenuOption) { $('.sidebar-menu-option', panel).val(frameSideLayout.sidebarMenuOption) } if (frameSideLayout.headerTopDropdownStyle) { $('.page-header-top-dropdown-style-option', panel).val(frameSideLayout.headerTopDropdownStyle) } if (frameSideLayout.layoutStyleOption) { setThemeStyle(frameSideLayout.layoutStyleOption) } if (frameSideLayout.headerTopDropdownStyle) { setColor(frameSideLayout.frameColor) } setLayout() })() }; return { init: function () { handleTheme() } } }(); if (App.isAngularJsApp() === false) { jQuery(document).ready(function () { frameStyle.init() }) }